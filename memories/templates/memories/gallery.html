{% extends "memories/base.html" %}

{% block title %}Галерея{% endblock %}

{% block content %}
<section class="fade-up space-y-4 text-center">
    <h1 class="text-5xl romantic-font">Фотогалерея</h1>
    <p class="text-[#7A6F6F] max-w-2xl mx-auto">Коллекция кадров, которые напоминают о самых тёплых моментах нашей истории.</p>
</section>

{% if categories %}
<section class="fade-up flex flex-wrap justify-center gap-3 mt-6">
    {% for category in categories %}
    <span class="px-4 py-2 rounded-full border-2 border-[#FFD1DC] bg-[#FFF0F5] text-[#7A6F6F] text-sm uppercase tracking-wide">{{ category }}</span>
    {% endfor %}
</section>
{% endif %}

<section class="fade-up mt-10">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for photo in photos %}
        <figure class="relative romantic-card overflow-hidden border-2 border-[#FFD1DC] cursor-pointer group" data-lightbox-item data-lightbox-src="{{ photo.image.url }}" data-lightbox-caption="{{ photo.title }}">
            <img src="{{ photo.image.url }}" alt="{{ photo.title }}" class="w-full h-64 object-cover transition-transform duration-300 group-hover:scale-105">
            <figcaption class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition flex flex-col justify-end p-5 text-white">
                <span class="text-lg font-semibold">{{ photo.title }}</span>
                {% if photo.category %}
                <span class="text-sm text-white/90">{{ photo.category }}</span>
                {% endif %}
            </figcaption>
        </figure>
        {% empty %}
        <p class="text-center text-[#7A6F6F] col-span-full">Добавьте снимки, чтобы наполнить галерею нашими улыбками.</p>
        {% endfor %}
    </div>
</section>

<div id="lightbox-overlay" class="hidden fixed inset-0 bg-black/80 z-50 items-center justify-center p-6">
    <button id="lightbox-close" class="absolute top-6 right-6 text-white text-4xl leading-none">&times;</button>
    <img id="lightbox-image" src="" alt="" class="max-h-[80vh] max-w-full rounded-romantic shadow-2xl border-4 border-[#FFD1DC]">
    <p id="lightbox-caption" class="text-white/90 text-center mt-4 text-lg"></p>
</div>
{% endblock %}
